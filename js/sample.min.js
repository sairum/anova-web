"use strict";var sample=(function(){var precision=4;var separator=".";function sampleNormalMultipleTimes(){let N=parseInt(document.getElementById("clt_N").value);let mean=parseFloat(document.getElementById("clt_avg").value);let std=parseFloat(document.getElementById("clt_std").value);let n=parseInt(document.getElementById("clt_n").value);let result=document.getElementById("clt_res");result.innerHTML="";let stats=document.getElementById("clt_stats");stats.innerHTML="";let averages=[],sumx=0,sumx2=0;;for(let i=0;i<N;i++){let x=0.0;for(let j=0;j<n;j++){x+=jStat.normal.sample(mean,std);}
x=x/n;averages.push(x);sumx+=x;sumx2+=Math.pow(x,2);}
let avg=(sumx/N).toFixed(precision);let variance=((sumx2-Math.pow(sumx,2)/N)/(N-1)).toFixed(precision);let sd=Math.sqrt(variance).toFixed(precision);let text="<h3>Sampled averages</h3>";text+="<textarea cols=\"20\" rows=\"10\" id=\"clt_results\">";for(let i=0;i<N;i++)text+=averages[i].toFixed(precision)+"\n";text+="</textarea>";result.innerHTML=text;result.style.display="inline-block";text="<h3>Sample statistics</h3>";text+="<table><tr><td>x&#772;&#772; (average of averages)</td><td>"+avg.toString()+"</td></tr>";text+="<tr><td><i>s&#772;</i> (stdev of averages)</td><td>"+sd.toString()+"</td></tr>";text+="<tr><td><i>s&#772;</i>&sup2; (variance of averages)</td><td>"+variance.toString()+"</td></tr>";stats.innerHTML=text;stats.style.display="inline-block";document.getElementById("clt_sep").disabled=false;}
function set_normVar(){let s=document.getElementById("norm_std").value;document.getElementById("norm_var").value=Math.pow(s,2).toFixed(precision);}
function set_cltVar(){let s=document.getElementById("clt_std").value;document.getElementById("clt_var").value=Math.pow(s,2).toFixed(precision);}
function set_FVar(){let s=document.getElementById("F_std").value;document.getElementById("F_var").value=Math.pow(s,2).toFixed(precision);}
function multipleFTests(){let N=parseInt(document.getElementById("F_N").value);let mean=parseFloat(document.getElementById("F_avg").value);let std=parseFloat(document.getElementById("F_std").value);let n1=parseInt(document.getElementById("F_n1").value);let n2=parseInt(document.getElementById("F_n2").value);console.log(N,mean,std,n1,n2);let result=document.getElementById("F_res");result.innerHTML="";let ftests=[],v1=[],v2=[];let x,sumx,sumx2;for(let i=0;i<N;i++){x=0.0,sumx=0,sumx2=0;;for(let j=0;j<n1;j++){x=jStat.normal.sample(mean,std);sumx+=x;sumx2+=Math.pow(x,2);}
let var1=(sumx2-Math.pow(sumx,2)/n1)/(n1-1);x=0.0,sumx=0,sumx2=0;for(let j=0;j<n2;j++){x=jStat.normal.sample(mean,std);sumx+=x;sumx2+=Math.pow(x,2);}
let var2=(sumx2-Math.pow(sumx,2)/n2)/(n2-1);v1.push(var1);v2.push(var2);ftests.push(var1/var2);}
let text="<h3>Multiple F-tests</h3>";text+="<textarea cols=\"20\" rows=\"10\" id=\"F_results\">";for(let i=0;i<N;i++)text+=ftests[i].toFixed(precision)+"\n";text+="</textarea>";result.innerHTML=text;result.style.display="inline-block";document.getElementById("F_sep").disabled=false;}
function sampleNormal(){let mean=parseFloat(document.getElementById("norm_avg").value);let std=parseFloat(document.getElementById("norm_std").value);let r=parseInt(document.getElementById("norm_n").value);let result=document.getElementById("norm_res");result.innerHTML="";let stats=document.getElementById("norm_stats");stats.innerHTML="";let x=0,s=[],sumx=0,sumx2=0;for(let i=0;i<r;i++){x=jStat.normal.sample(mean,std);sumx+=x;sumx2+=Math.pow(x,2);s.push(x);}
let avg=(sumx/r).toFixed(precision);let variance=((sumx2-Math.pow(sumx,2)/r)/(r-1)).toFixed(precision);let sd=Math.sqrt(variance).toFixed(precision);let text="<h3>Sampled values</h3>";text+="<textarea cols=\"20\" rows=\"10\" id=\"norm_results\">";for(let i=0;i<r;i++)text+=s[i].toFixed(precision)+"\n";text+="</textarea>";result.innerHTML=text;result.style.display="inline-block";text="<h3>Sample statistics</h3>";text+="<table><tr><td>x&#772; (average)</td><td>"+avg.toString()+"</td></tr>";text+="<tr><td><i>s</i> (stdev)</td><td>"+sd.toString()+"</td></tr>";text+="<tr><td><i>s</i>&sup2; (variance)</td><td>"+variance.toString()+"</td></tr>";stats.innerHTML=text;stats.style.display="inline-block";document.getElementById("norm_sep").disabled=false;}
function setPrecision(){let s=document.getElementById("precision").value;precision=parseInt(s);if(precision<1){document.getElementById("precision").value=1;precision=1;}else{if(precision>10){document.getElementById("precision").value=10;precision=10;}else{document.getElementById("precision").value=precision;}}}
function setAccordion(){let acc=document.getElementsByClassName("accordion");for(let i=0;i<acc.length;i++){acc[i].addEventListener("click",function(){this.classList.toggle("active");let panel=this.nextElementSibling;if(panel.style.display==="block"){panel.style.display="none";}else{panel.style.display="block";}});}}
function normReset(){document.getElementById("norm_avg").value="8.0";document.getElementById("norm_std").value="1.5";document.getElementById("norm_n").value="10";document.getElementById("norm_var").value="2.25";}
function cltReset(){document.getElementById("clt_N").value="100";document.getElementById("clt_avg").value="8.0";document.getElementById("clt_std").value="1.5";document.getElementById("clt_n").value="10";document.getElementById("clt_var").value="2.25";}
function FReset(){document.getElementById("F_N").value="100";document.getElementById("F_avg").value="8.0";document.getElementById("F_std").value="1.5";document.getElementById("F_n1").value="2";document.getElementById("F_n2").value="10";document.getElementById("F_var").value="2.25";}
function switchDecSep(tagid,sepid){let res=document.getElementById(tagid).value;let sep=document.getElementById(sepid).value;if(sep=="."){res=res.replace(/\,/g,".");document.getElementById(sepid).value=",";document.getElementById(sepid).innerHTML=", (comma)";}
else{res=res.replace(/\./g,",");document.getElementById(sepid).value=".";document.getElementById(sepid).innerHTML=". (dot)";}
document.getElementById(tagid).value=res;}
return{setAccordion:setAccordion,sampleNormal:sampleNormal,sampleNormalMultipleTimes:sampleNormalMultipleTimes,normReset:normReset,cltReset:cltReset,set_normVar:set_normVar,set_cltVar:set_cltVar,set_FVar:set_FVar,setPrecision:setPrecision,switchDecSep:switchDecSep,multipleFTests:multipleFTests,}})();document.addEventListener("DOMContentLoaded",function(){sample.setAccordion();});